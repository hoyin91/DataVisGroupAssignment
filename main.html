<!DOCTYPE html>
<html lang="en">
<title>CDS505 - Visualizing and Exploring Double Glazing Window</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="slick/slick.css">
<link rel="stylesheet" href="slick/slick-theme.css">
<link rel="stylesheet" href="css/w3.css">
<link rel="stylesheet" href="css/custom.css">
<link rel="stylesheet" href="css/bootstrap-grid.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    body {
        font-family: "Lato", sans-serif
    }

    .mySlides {
        display: none
    }
</style>

<body>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="slick/slick.js"></script>

    <!-- Navbar -->
    <div class="w3-top">
        <div class="w3-bar w3-black w3-card">
            <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right" href="javascript:void(0)"
                onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
            <a href="#" class="w3-bar-item w3-button w3-padding-large">Home</a>
            <a href="#temperature" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Temperature</a>
            <a href="#Pressure" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Pressure</a>
            <a href="#Velocity" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Air Flow</a>
            <a href="#airflow_streamline" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Streamline</a>
            <a href="#discussion" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Discussion</a>
            <!--<div class="w3-dropdown-hover w3-hide-small">
                <button class="w3-padding-large w3-button" title="More">Combination <i class="fa fa-caret-down"></i></button>
                <div class="w3-dropdown-content w3-bar-block w3-card-4">
                    <a href="#temperature-pressure" class="w3-bar-item w3-button">Temperature/Pressure</a>
                    <a href="#temperature-airflow" class="w3-bar-item w3-button">Temperature/Air Flow</a>
                    <a href="#pressure-airflow" class="w3-bar-item w3-button">Pressure/Air Flow</a>
                </div>
            </div-->
            <a href="javascript:void(0)" class="w3-padding-large w3-hover-red w3-hide-small w3-right"><i class="fa fa-search"></i></a>
        </div>
    </div>
    <!-- Page content -->
    <div class="w3-content" style="max-width:2000px;margin-top:46px">
        <div class="w3-container w3-content w3-center w3-padding-64" style="max-width:1000px" id="home">
            <h2 class="w3-opacity">Visualizing and Exploring Double Glazing Window</h2>
            <p class="w3-justify">An engineer is studying the behaviour of air flow between two plates
                where one plate is cold and the other is warm. This is the situation which could be
                encountered with double glazing where the hot and cold plates are actually the two panes
                of glass which trap the air inside. The figure below shows the two plates with the
                temperature at the hot plate being one and the temperature at the cold plate being zero.
                At either end of the closed system the temperature is held to constantly form a linear
                temperature variation between the two plates. The experiment eventually reaches a steady
                state and a symmetry plane exists in the middle. This is shown in the figure below:,</p>
            <img src="page/home/dglazing-fig.png" style="width:50%">
        </div>

        <!-- The TEmperature Section -->
        <div class="blue" id="temperature">
            <div class="w3-container w3-content w3-center w3-padding-64" style="max-width:1000px" id="band">
                <h2 class="w3-wide">Temperature distribution</h2>
                <p class="w3-opacity" class="w3-round">Exploring on the Temperature Distribution</p>
                <p class="w3-justify">
                    Hot and Cold plate visualization <br />
                    <b>Surface : </b><br />
                    - Animation slide across x,y,z-axis to show the temperature change across the axis<br />
                    - x-axis : When slide across x-axis, there are 2 phenomenal observed. First, the upper cavity
                    have higher temperature as compared to lower cavity. Second, the outer layer cool down faster
                    than the inner part <br />
                    - y-axis : When the slice slides across y-axis, observed that the temperature distribution at y=0 and y=17 is
                    the same.
                    The lower temperature found at range 0 to 8.5. Higher temperature found at range 8.5 to 17. <br />
                    - z-axis : At z=0 the temperature distribution at the top and bottom cavity is the same,
                    and the temperature across the x-axis gradually decrease. When the slice slides across the z-axis, the upper
                    area of the plane
                    increases in temperature and the lower area of the plane decrease in temperature. <br />
                    <br />
                    <b>Isosurface : </b><br />
                    - Surface that represents point of constant value within a space of volume <br />
                    - Varying the isovalue allows us to visualize on the temperature change<br />
                    - Isovalue approximately close to value of 1 indicate of the hot area, 0.5 for warm while 0 is for the cold area. <br />
                    - Animation vary the isovalue from range of 1 to 0 indicates how the temperature varies across from hot to cold <br />
                    - Jet Color represents of the temperature. <br />
                </p>
                <div class="row">
                    <div class="col-sm">
                        Surface X:
                        <img src="page/temperature/slide_x1.png" alt="slidex" style="width:100%" onclick="initSlick(this, 1, 'temperatureImgContainer', addAnimation('page/temperature/slicex_animation.mp4'));">
                    </div>
                    <div class="col-sm">
                        Surface Y:
                        <img src="page/temperature/slide_y1.png" alt="slidey" style="width:100%" onclick="initSlick(this, 1, 'temperatureImgContainer', addAnimation('page/temperature/slicey_animation.mp4'));">
                    </div>
                    <div class="col-sm">
                        Surface Z:
                        <img src="page/temperature/slide_z1.png" alt="streamline4" style="width:100%" onclick="initSlick(this, 3, 'temperatureImgContainer', addAnimation('page/temperature/slicez_animation.mp4'));">
                    </div>
                    <div class="col-sm">
                        Volume:
                        <img src="page/temperature/temp_volume1.png" alt="temp2" style="width:100%" onclick="initSlick(this, 1, 'temperatureImgContainer', '');">
                    </div>
                    <div class="col-sm">
                        Isosurface:
                        <img src="page/temperature/isosurface1.png" alt="isosurface" style="width:100%" onclick="initSlick(this, 5, 'temperatureImgContainer', addAnimation('page/temperature/isosurface_animation.mp4'));">
                    </div>

                </div>
                <div class="container">
                    <span onclick="this.parentElement.style.display='none'" class="closebtn">&times;</span>
                    <img id="expandTemperature" style="width:100%">
                    <div id="temperatureImgContainer"></div>
                </div>
            </div>

        </div>
    </div>
    <div class="light-blue" id="Pressure">
        <div class="w3-container w3-content w3-padding-64" style="max-width:1000px">
            <h2 class="w3-wide w3-center">Pressure visualization</h2>
            <p class="w3-opacity w3-center">Visualize using Paraview Slice</p>
            <p class="w3-justify">
                Observation: <br/>
                - Visualize the pressure by using slice. <br />
                - The slice indicate the pressure. <br />
                - Color of the slice indicate the pressure <br />
                - Use 3D isosurface to find out which region has the low and high pressure. <br/>
                - Isosurface animation varies the isovalue from -0.19 to 0.36, to visualize region from low pressure to high pressure<br/>
            </p>
            <div class="row">
                <div class="col-sm">
                    Temperature with relation to Pressure
                    <img src="page/pressure/pressureslice_temp_1.png" alt="pressure_temp" style="width:100%" onclick="initSlick(this, 1, 'PressureImgContainer', addAnimation('page/pressure/pressureNtemp.mp4'));">
                </div>
                <div class="col-sm">
                    Pressure with relation to Velocity Glyph and Temperature
                    <img src="page/pressure/tempslice_pressure_velocityglyph_1.png" alt="pressure_velo" style="width:100%"
                        onclick="initSlick(this, 1, 'PressureImgContainer', addAnimation('page/pressure/pressureNvelocity.mp4'));">
                </div>
                <div class="col-sm">
                    Isosurface
                    <img src="page/pressure/pressure_isosurface_1.png" alt="pressure_velo" style="width:100%"
                        onclick="initSlick(this, 1, 'PressureImgContainer', addAnimation('page/pressure/pressure_isosurfce.mp4'));">
                </div>
            </div>
            <div class="container">
                <span onclick="this.parentElement.style.display='none'" class="closebtn">&times;</span>
                <img id="expandPressure" style="width:100%">
                <div id="PressureImgContainer"></div>
            </div>
        </div>
    </div>

    <!-- The Contact Section -->
    <div class="blue" id="Velocity">
        <div class="w3-container w3-content w3-padding-64" style="max-width:1000px">
            <h2 class="w3-wide w3-center">Velocity</h2>
            <p class="w3-opacity w3-center">Velocity visualization</p>
            <p class="w3-justify">
                The nature of the data for the velocity is in vector form of x, y & z dimension.<br/>
                <br/>
                Observation: <br />
                Initially, we tried to separate out the data vis method in order to clearly visualize on each data.
                However, the data is not making any sense as we have no clue on what's going on with the glyph arrow. 
                As in the Figure - Glyph w.r.t velocity (Original) at below, we cannot visualize on the degree of velocity magnitude as well as the flow direction as there are too many sample points exist. It is very confusing and hard to visualize on the data.
                <br/>
                <br/>
                Therefore, we proceed to combine 2 different data vis methods in order to ease on the visualization of the velocity data. <br/>
                Glyph - arrow is chosen as the representation of glphy. Arrow is very helpful in telling alot of valuable information on the velocity data. <br/>
                i) The direction of the arrow indicates on the flow of the velocity.  <br/>
                ii) The length and the size of the arrow indicates on the magnitude of the velocity at the region. <br/>
                As the size getting bigger, it also means that the magnitude of the velocity getting higher. <br/>
                <br/>
                However, it is still not easy to look at the glyph as there are many arrows and it looks very dioriented even though we have
                setting it to flow according to the orientation of the velocity. <br>
                <br/>
                As Tufte's 3rd principles mentioned, the overly added 3D glyph is actually making it looks
                worse. Since we have alot of point and therefore, we reduced the sample point to 800 instead of 2000. This has greatly enhance on the
                visibility as the arrow are more distinct and easily observed. <br/>

                we are further deploy a slice which taking input of magnitude with respect to the velocity.  <br/>
                This slice of plane which slicing from Z-plane helps to cover up on the loss of the magnitude as we have reduced the data pointin earlier (3D Glyph).
                <br/>
                Combination of these two vis methods help us to better understand on the magnitude of the velocity. <br/>
                Rotating of those 3D will help us to better understand on the data structure. <br/>

                <br/>
                Figure Explanation:   <br/>
                1) The initial data tried to tell on the flow of the velocity. However, there are too many points and it is hard to visualize on the data <br/>
                2) The data is cleaned up by reducing the points and we can visual on the flow better. <br/>
                3) Slice with respect to mangnitude of velocity showing the magnitude in z-axis from bottom to top. We can see how
                   the magnitude changes and how to link it with the glyph arrow. <br/>
                4) Combination of velocity with glyph arrow with high sample points. It is hard to visualize on the data as there are too much of information. <br/>
                5) We further reduced the sample point from the last animation and combinate the velocity volume with glyph. The opacity of the volume is set to very low so that it doesn't block on the arrows. We further orient the 3D block to let user visualize more on the flow from each angle. <br/>
            </p>
            <div class="row">
                <div class="col-sm">
                    1) Glyph w.r.t velocity (Initial visualization)
                    <img src="page/velocity/Arrow_high_sample_point_1.png" alt="velo1" style="width:100%" onclick="initSlick(this, 1, 'VelocityImgContainer');">
                </div>
                <div class="col-sm">
                    2) Glyph w.r.t Magnitude of Velocity (Low sample points)
                    <img src="page/velocity/Glyph_arrow_1.png" alt="velo1" style="width:100%" onclick="initSlick(this, 1, 'VelocityImgContainer', addAnimation('page/velocity/Glyph_flow_1.mp4'));">
                </div>
                <div class="col-sm">
                    3) Glyph w.r.t Magnitude of Velocity With Slice
                    <img src="page/velocity/Arrow_slice_1.png" alt="velo1" style="width:100%" onclick="initSlick(this, 1, 'VelocityImgContainer', addAnimation('page/velocity/velocityNglyph.mp4'));">
                </div>
            <div class="row">
                <div class="col-sm">
                    4) Glyph flow combined with Velocity Volume (high sample points)
                    <img src="page/velocity/STNArrow_1.png" alt="velo1" style="width:100%" onclick="initSlick(this, 1, 'VelocityImgContainer', addAnimation('page/velocity/Glyph_combine_no_magnitude.mp4'));">
                </div>
                <div class="col-sm">
                    5) Glyph flow combined with Velocity Volume
                    <img src="page/velocity/air_flow_1.png" alt="velo1" style="width:100%" onclick="initSlick(this, 1, 'VelocityImgContainer', addAnimation('page/velocity/Glyph_combine.mp4'));">
                </div>
            </div>
            <div class="container">
                <span onclick="this.parentElement.style.display='none'" class="closebtn">&times;</span>
                <img id="expandVelocity" style="width:100%">
                <div id="VelocityImgContainer"></div>
            </div>
        </div>
    </div>

    <div class="light-blue" id="airflow_streamline">
        <div class="w3-container w3-content w3-padding-64" style="max-width:1000px">
            <h2 class="w3-wide w3-center">Air Flow streamline visualization</h2>
            <p class="w3-opacity w3-center">Visualize using Paraview Streamtracer</p>
            <p class="w3-justify">
                - Visualize the air flow using streamlines. <br />
                - The slice indicates on the temperature change. <br />
                - Glyph of arrow tells on the direction of the airflow <br />
                - Size of arrow indicates on the magnitude of the velocity <br />
                - Uses two seed types to visualize the streamline, Point source and high resolution line. <br />
                - <b>Point source</b>, seed at the middle of the data domain, visualize the airflow at the center. <br />
                - <b>High resolution line</b>, visualize the streamline from the start point to end point to the line
                <br />
            </p>
            <div class="row">
                <div class="col-sm">
                    Seed type: Point Source
                    <img src="page/airflow_streamline/streamlinespoint1.png" alt="Point Source" style="width:100%"
                        onclick="initSlick(this, 8, 'streamlineImgContainer', addAnimation('page/airflow_streamline/streamline_animation.mp4'));">
                </div>
                <div class="col-sm">
                    Seed Type: High Resolution Line
                    <img src="page/airflow_streamline/streamlines1.png" alt="High resolution line source" style="width:100%"
                        onclick="initSlick(this, 2, 'streamlineImgContainer');">
                </div>
                <div class="col-sm">
                    Air flow:
                    <img src="page/airflow_streamline/airflow_1.png" alt="streamline3" style="width:100%" onclick="initSlick(this, 5, 'streamlineImgContainer');">
                </div>
            </div>
            <div class="container">
                <span onclick="this.parentElement.style.display='none'" class="closebtn">&times;</span>
                <img id="expandStreamline" style="width:100%">
                <div id="streamlineImgContainer">
                </div>
            </div>
        </div>
    </div>

    <div class="" id="discussion">
        <div class="w3-container w3-content w3-padding-64" style="max-width:1000px">
            <h2 class="w3-wide w3-center">Disussion</h2>
            <!--<p class="w3-opacity w3-center">How temperature </p> -->
            <p class="w3-justify">
                This visualization design objective is to find out <br/>
                - How the <a href="#temperature">temperature distribution</a> in a double glazing glass? <br/>
                - How <a href="#Pressure">pressure</a> vary in a double glazing glass ? <br/>
                - Pattern of <a href="#Velocity">airflow</a> <br />
                - Relationship between <a href="#Velocity">airflow and temperature</a> <br/>
                - Airflow <a href="#airflow_streamline">streamlime</a><br/><br/>

                Pressure and temperature is scalar and quantitative value, thus can direct represent it 
                using color. For velocity data, it is a vector and quantitative value, in order to represent the direction
                of the airflow, glyph arrow is being used to display it. Other than that, magnitude of velocity is being derived from
                the vector value using formula (magnitude = sqrt(x^2 + y^2 + z^2)) <br/>

                <br/>
                Tufte's four major categories in the principles of graph construction: <br/>
                1) Clear vision <br/>
                2) Clear understanding <br/>
                3) Scales <br/>
                4) General strategy <br/>

                As the principles teaches well on how to make our data better visualized, we carefully derive and select on
                the method to represent the data as concise as possible. Single isotopes during animation, Retaining the hot and cold plate 
                during animation (reduced in opacity in order to prevent blockage) have been done.


                <br/><br/>
                <b>What advantages/disadvantages did you find when trying to use Paraview or OpenDX to visualise the
                    data ?</b><br />

                Advantages: <br/>
                The visualization tool use in this report is Paraview, the advantage of this tools compare to OpenDX is
                still under development
                where OpenDX is no longer under development.

                In this assignment, we've chosen Paraview as our tool to visualize on the data. Generally, we found 
                the tool is easy to learn and equiped with powerful features which help alot in visualization. <br/> <br/>

                i) Paraview is capable to handle various type of data type such as structured, unstructured, polygonal, image, multi-block and AMR data. All processing operations (filters) will produce datasets and this allows user to either further process the result of every operation or the results as a data file. For example, user can extract a cut surface, reduce the number of points on the surface by masking and apply glyphs to the result. This has been demostrated on above.  <br/> 
                </b>

                ii) Paraview also handles vector fields well. User can inspect on the vectors field by applying glyphs (arrow in this assignment) to the points in a dataset. The glyphs can be scaled by scalars, vector component or vector magnitude and can be oriented using a vector field. In this assignment, we scaled it by the vector mangnitude and it help to tell very on the flow and orientation well. Contours and isosurfaces can be extracted from all data types using scalars or vector components. The results can be colored by any other variable or processed further. When possible, structured data contours/isosurfaces are extracted with fast and efficient algorithms which make use of the efficient data layout. <br/>

                iii) Other than the powerful visulization capability, Paraview also provides a very good User Interaction (UI) for user to navigate and inspect on the data as it has intuitive and flexible interface based on the Qt application framework. This allows user to change on the parameters of many filters by directly interacting with the 3D view using 3D widgets (manipulators).
                <br/>

                iv) The inteface design of Paraview is user friendly as all important tools are located in the main window and this has greatly eliminated the need for large number of windows which are often difficult to locate on a cluttered desktop. It is also possible to shear off inspectors from the main window. <br/>

                <br/>
                Disadvantages: <br/>
                The only disadvantage of Paraview that we encountered during this assignment is there is a need to manually
                convert the .dat file to become .vtk file. <br/> <br/>

                File: <br />
                <a href="temperature.vtk" download>Temperature.vtk</a><br />
                <a href="pressure.vtk" download>Pressure.vtk</a><br />
                <a href="velocity.vtk" download>Velocity.vtk</a><br />
            </p>
        </div>
    </div>

    <!-- End Page Content -->
    </div>
    <!-- Footer -->
    <footer class="w3-container w3-padding-64 w3-center w3-opacity w3-light-grey w3-xlarge">
        <p class="w3-medium">CDS505 Assignment 2: Visualizing and Exploring Double Glazing Window</p>
    </footer>

    <script>
        // Used to toggle the menu on small screens when clicking on the menu button
        function myFunction() {
            var x = document.getElementById("navDemo");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
            } else {
                x.className = x.className.replace(" w3-show", "");
            }
        }

        function addAnimation(src) {
            html = ''
            html += '<div>'
            html += '<video style="width:100%;" controls>' + '<source src="' + src + '">' + '</video>'
            html += '</div>'
            //console.log(html);
            return html
        }

        function expandImage(imgs, expandArea) {
            var expandImg = document.getElementById(expandArea);
            //var imgText = document.getElementById("imgtext");
            expandImg.src = imgs.src;
            //imgText.innerHTML = imgs.alt;
            expandImg.parentElement.style.display = "block";
        }

        function initSlick(img, numImage, containerId, animation) {
            var container = document.getElementById(containerId);
            if ($('#' + containerId).hasClass('slick-initialized')) {
                $('#' + containerId).slick('unslick');
                container.innerHTML = "";
            }
            container.parentElement.style.display = "block";
            var imageSource = img.src;
            for (i = 1; i <= numImage; i++) {
                console.log(i);
                imageSource = imageSource.replaceAt(imageSource.length - 5, String(i));
                //console.log(imageSource);
                container.innerHTML += '<div><img src="' + imageSource + '" style="width:100%"></div>'
                console.log(imageSource);
            }
            if (animation != '')
                container.innerHTML += animation;
            $('#' + containerId).slick({
                adaptiveHeight: true,
                dots: true
            });
        }

        // When the user clicks anywhere outside of the modal, close it
        var modal = document.getElementById('ticketModal');
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        function initImgSlide(sliderId, numImage) {
            var slider = document.getElementById(sliderId);
            console.log(sliderId);
            slider.value = 1;
            slider.min = 1;
            slider.max = numImage;
        }

        function imgSlide(slider, imgId) {
            var img = document.getElementById(imgId);
            img.src = img.src.replaceAt(img.src.length - 5, slider.value);
            console.log(img.src);
        }

        String.prototype.replaceAt = function (index, replacement) {
            return this.substr(0, index) + replacement + this.substr(index + replacement.length);
        }
    </script>

</body>

</html>